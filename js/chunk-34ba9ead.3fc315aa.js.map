{"version":3,"sources":["webpack:///./src/api/topic.js","webpack:///./src/views/detail/index.vue?fdd6","webpack:///src/views/detail/index.vue","webpack:///./src/views/detail/index.vue?dbcf","webpack:///./src/views/detail/index.vue","webpack:///./src/api/collect.js","webpack:///./src/views/detail/index.vue?3047"],"names":["fetchList","query","request","url","method","params","detail","id","render","_vm","this","_h","$createElement","_c","_self","staticClass","articleData","good","top","_v","_s","getArticleTab","_e","title","_f","create_at","author","loginname","visit_count","getTabFrom","class","decollect","is_collect","on","toggleCollect","domProps","content","reply_count","_l","item","index","key","attrs","name","avatar_url","staticRenderFns","component","collectTopic","data","decollectTopic","getUserCollections"],"mappings":"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","file":"js/chunk-34ba9ead.3fc315aa.js","sourcesContent":["import request from '@/utils/request'\r\n\r\n//主题首页\r\nexport function fetchList(query) {\r\n    return request({\r\n      url: '/topics',\r\n      method: 'get',\r\n      params: query\r\n    })\r\n}\r\n\r\n\r\n//主题详情\r\nexport function detail(query, id) {\r\n    return request({\r\n        url: `/topic/${id}`,\r\n        method: 'get',\r\n        params: query\r\n    })\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('div',{staticClass:\"title\"},[_c('div',{staticClass:\"title-head\"},[(_vm.articleData.good || _vm.articleData.top)?_c('span',{staticClass:\"tab\"},[_vm._v(\"\\n                \"+_vm._s(_vm.getArticleTab(_vm.articleData))+\"\\n            \")]):_vm._e(),_c('span',{staticClass:\"article-title\"},[_c('b',[_vm._v(_vm._s(_vm.articleData.title))])])]),_c('div',{staticClass:\"title-from\"},[_c('span',[_vm._v(\" • 发布于 \"+_vm._s(_vm._f(\"formatDate\")(_vm.articleData.create_at))+\" • 作者 \"+_vm._s(_vm.articleData.author.loginname)+\" • \"+_vm._s(_vm.articleData.visit_count)+\" 次浏览 • 来自 \"+_vm._s(_vm.getTabFrom(_vm.articleData)))]),(_vm.islogin)?_c('span',{staticClass:\"collect\",class:{decollect: _vm.articleData.is_collect},on:{\"click\":_vm.toggleCollect}},[_vm._v(_vm._s(!_vm.articleData.is_collect?\"收藏\":\"取消收藏\"))]):_vm._e()])]),_c('div',{staticClass:\"content markdown-text\",domProps:{\"innerHTML\":_vm._s(_vm.articleData.content)}}),_c('div',{staticClass:\"reply\"},[_c('div',{staticClass:\"reply-title\"},[_vm._v(\"\\n            \"+_vm._s(_vm.articleData.reply_count)+\" 回复\\n        \")]),_c('ul',{staticClass:\"reply-content\"},_vm._l((_vm.articleData.replies),function(item,index){return _c('li',{key:item.id,staticClass:\"reply-item\"},[_c('div',{staticClass:\"avatar\"},[_c('router-link',{attrs:{\"to\":{name: 'User', params: {loginname: item.author.loginname}}}},[_c('img',{attrs:{\"src\":item.author.avatar_url,\"alt\":\"头像\",\"title\":item.author.loginname}})])],1),_c('div',{staticClass:\"reply-main\"},[_c('div',{staticClass:\"author-msg\"},[_c('span',{staticClass:\"author-name\"},[_vm._v(_vm._s(item.author.loginname)+\" \")]),_c('span',{staticClass:\"create-time\"},[_vm._v(\" \"+_vm._s(index+1)+\"楼 • \"+_vm._s(_vm._f(\"formatDate\")(item.create_at)))])]),_c('div',{staticClass:\"reply-msg\"},[_c('div',{domProps:{\"innerHTML\":_vm._s(item.content)}})])])])}),0)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"detail\">\r\n        <div class=\"title\">\r\n            <div class=\"title-head\">\r\n                <span class=\"tab\" v-if=\"articleData.good || articleData.top\">\r\n                    {{getArticleTab(articleData)}}\r\n                </span>\r\n                <span class=\"article-title\">\r\n                    <b>{{articleData.title}}</b>\r\n                </span>\r\n            </div>\r\n            <div class=\"title-from\">\r\n                <span> • 发布于 {{articleData.create_at | formatDate}} • 作者 {{articleData.author.loginname}} • {{articleData.visit_count}} 次浏览 • 来自 {{getTabFrom(articleData)}}</span>\r\n                <span  v-if=\"islogin\" class=\"collect\" :class=\"{decollect: articleData.is_collect}\" @click=\"toggleCollect\">{{!articleData.is_collect?\"收藏\":\"取消收藏\"}}</span>\r\n            </div>\r\n        </div>\r\n        <div class=\"content markdown-text\" v-html=\"articleData.content\"></div>\r\n        <div class=\"reply\">\r\n            <div class=\"reply-title\">\r\n                {{articleData.reply_count}} 回复\r\n            </div>\r\n            <ul class=\"reply-content\">\r\n                <li class=\"reply-item\" v-for=\"(item, index) in articleData.replies\" :key=\"item.id\">\r\n                    <div class=\"avatar\">\r\n                        <router-link :to=\"{name: 'User', params: {loginname: item.author.loginname}}\">\r\n                            <img :src=\"item.author.avatar_url\" alt=\"头像\" :title=\"item.author.loginname\"/>\r\n                        </router-link>\r\n                    </div>\r\n                    <div class=\"reply-main\">\r\n                        <div class=\"author-msg\">\r\n                            <span class=\"author-name\">{{item.author.loginname}} </span>\r\n                            <span class=\"create-time\"> {{index+1}}楼 • {{item.create_at | formatDate}}</span>\r\n                        </div>\r\n                        <div class=\"reply-msg\">\r\n                            <div v-html=\"item.content\"></div>\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { detail } from '@/api/topic'\r\nimport { collectTopic, decollectTopic } from '@/api/collect'\r\nimport { mapState } from 'vuex'\r\nexport default {\r\n    name: 'Detail',\r\n    data() {\r\n        return {\r\n            articleData: {\r\n                id: '',\r\n                author_id: '',\r\n                tab: '',\r\n                content: '',\r\n                title: '',\r\n                last_reply_at: '',\r\n                good: false,\r\n                top: false,\r\n                reply_count: '',\r\n                visit_count: '',\r\n                create_at: '',\r\n                author: {\r\n                    loginname: '',\r\n                    avatar_url: ''\r\n                },\r\n                replies: [],\r\n                is_collect: false\r\n            },\r\n            listQuery: {\r\n                mdrender: true,\r\n                accesstoken: this.accesstoken\r\n            },\r\n            id: this.$route.params.id,\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState([\r\n            'islogin',\r\n            'accesstoken'\r\n        ])\r\n    },\r\n    created() {\r\n        this.getArticle()\r\n    },\r\n    methods: {\r\n        getArticle() {\r\n            detail(this.listQuery, this.id).then(response => {\r\n                this.articleData = response.data.data\r\n                console.log(this.articleData)\r\n            })\r\n        },\r\n        getTabFrom(data) {\r\n            if(data.tab === \"share\") return \"分享\"\r\n            if(data.tab === \"ask\") return \"问答\"\r\n            if(data.tab === \"job\") return \"招聘\"\r\n            if(data.tab === \"dev\") return \"测试\"\r\n        },\r\n        getArticleTab(data) {\r\n            if(data.top) {\r\n                return \"置顶\"\r\n            }\r\n            if(data.good) {\r\n                return \"精华\"\r\n            }\r\n        },\r\n        toggleCollect() {\r\n            if(this.articleData.is_collect === false) {\r\n                collectTopic({accesstoken: this.accesstoken, id: this.id}).then(response => {\r\n                    console.log(response.data.success)\r\n                })\r\n            }\r\n            if(this.articleData.is_collect === true) {\r\n                decollectTopic({accesstoken: this.accesstoken, id: this.id}).then(response => {\r\n                    console.log(response.data.success)\r\n                })\r\n            }\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.markdown-text {\r\n    overflow: hidden;\r\n}\r\n.detail {\r\n    width: calc(100% - 290px);\r\n    .title {\r\n        padding: 10px;\r\n        background-color: #fff;\r\n        border-bottom: 1px solid #f0f0f0;\r\n        border-radius: 3px 3px 0 0;\r\n        .title-head {\r\n            color: #333;\r\n            margin: 8px 0;\r\n            font-size: 22px;\r\n            line-height: 32px;\r\n            .tab {\r\n                color: #fff;\r\n                font-size: 12px;\r\n                background-color: $theme-color;\r\n                padding: 2px 4px;\r\n                border-radius: 3px;\r\n                margin-right: 5px;\r\n            }\r\n        }\r\n        .title-from {\r\n            color: #838383;\r\n            font-size: 12px;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            .collect {\r\n                background-color: $theme-color;\r\n                color: #fff;\r\n                border-radius: 3px;\r\n                font-size: 14px;\r\n                width: 54px;\r\n                height: 34px;\r\n                line-height: 34px;\r\n                text-align: center;\r\n                cursor: pointer;\r\n                position: relative;\r\n                &:hover::before {\r\n                    display: block;\r\n                    content: '';\r\n                    position: absolute;\r\n                    top: 0px;\r\n                    left: 0px;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    border-radius: 3px;\r\n                    background: rgba(0, 0, 0, .1)\r\n                }\r\n            }\r\n            .decollect {\r\n                background-color:#e5e5e5;\r\n                color: #333;\r\n                width: 84px;\r\n            }\r\n        }\r\n    }\r\n    .content {\r\n        padding: 10px;\r\n        background-color: #fff;\r\n        color: #333;\r\n        border-radius: 0 0 3px 3px;\r\n    }\r\n    .reply {\r\n        margin-top: 13px;\r\n        .reply-title {\r\n            padding: 10px;\r\n            color: #444;\r\n            font-size: 14px;\r\n            background-color: $card-title-color;\r\n            height: 40px;\r\n            border-radius: 3px 3px 0 0;\r\n        }\r\n        .reply-content {\r\n            background-color: #fff;\r\n            border-radius: 0 0 3px 3px;\r\n            .reply-item {\r\n                padding: 10px;\r\n                border-top: 1px solid #f0f0f0;\r\n                &:nth-child(1) { \r\n                    border-top: none;\r\n                }\r\n                display: flex;\r\n                justify-content:start;\r\n                .avatar {\r\n                    img {\r\n                        width: 30px;\r\n                        height: 30px;\r\n                        border-radius: 3px;\r\n                    }\r\n                }\r\n                .reply-main {\r\n                    margin-left: 10px;\r\n                    .author-msg {\r\n                        .author-name {\r\n                            font-weight: 700;\r\n                            font-size: 12px;\r\n                            color: #666;\r\n                        }\r\n                        .create-time {\r\n                            font-size: 11px;\r\n                            color: #08c;\r\n                        }\r\n                    }\r\n                    .reply-msg {\r\n                        margin: 0 0 15px 10px;\r\n                        font-size: 15px;\r\n                        color: #333;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=613f5dd9&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=613f5dd9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"613f5dd9\",\n  null\n  \n)\n\nexport default component.exports","import request from '@/utils/request'\r\n\r\n//收藏主题\r\nexport function collectTopic(data) {\r\n    return request({\r\n      url: '/topic_collect/collect',\r\n      method: 'post',\r\n      data: data\r\n    })\r\n}\r\n\r\n\r\n//取消主题\r\nexport function decollectTopic(data) {\r\n    return request({\r\n      url: '/topic_collect/de_collect/',\r\n      method: 'post',\r\n      data: data\r\n    })\r\n}\r\n\r\n\r\n//用户所收藏的主题\r\nexport function getUserCollections(loginname) {\r\n    return request({\r\n      url: `/topic_collect/${loginname}`,\r\n      method: 'get'\r\n    })\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=613f5dd9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=613f5dd9&lang=scss&scoped=true&\""],"sourceRoot":""}